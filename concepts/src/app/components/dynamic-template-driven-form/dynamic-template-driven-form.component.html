<form #petsForm="ngForm" (submit)="processForm( petsForm )">

	<h2 class="mt-3 mb-3">
		Pet List
	</h2>
	<ng-template ngFor let-pet [ngForOf]="form.pets" let-index="index" let-isLast="last">
		<div class="pet" [class.pet--invalid]="( nameControl.touched && nameControl.invalid )">
        <mat-form-field>
            <mat-label>Cars</mat-label>
            <select matNativeControl required name="type_{{ pet.id }}" [(ngModel)]="pet.type">
                <option value="Dog">Dog</option>
                <option value="Cat">Cat</option>
            </select>
          </mat-form-field>
        
      <mat-form-field  class="ml-4">
        <input matInput placeholder="Name"  #nameControl="ngModel" type="text"
        name="name_{{ pet.id }}" [(ngModel)]="pet.name" required autofocus>
      </mat-form-field>

      <mat-form-field class="ml-4">
          <input matInput placeholder="Age"  name="age_{{ pet.id }}" 
          (keydown.tab)="( ( isLast && addPet() ) || true )" [(ngModel)]="pet.age">
        </mat-form-field>

      <i (click)="removePet( index )" class="fas fa-times ml-3 fa-2x"></i>

		</div>

	</ng-template>

	<div class="btn btn-dark mt-4" (click)="addPet()">Add Another Pet</div>

	<button class="btn btn-info ml-4 mt-4" type="submit" [disabled]="( ! petsForm.form.valid )"> Process Form </button>

</form>

<div matTooltip="See the github code" class="middle">
    <a class="social-btn" href="https://github.com/gauravsaxena1997/Angular8-Basics/tree/master/concepts/src/app/components/dynamic-template-driven-form" target="_blank">
        <i class="fab fa-github"></i>
    </a>
</div>